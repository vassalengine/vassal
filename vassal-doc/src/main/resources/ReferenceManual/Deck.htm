<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Deck</title>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
</head>
<body>
<table border="0" cellpadding="2" cellspacing="2" width="100%">
  <tbody>
  <tr align="center">
  <td valign="top"><h1>VASSAL Reference Manual</h1> <small><a href="index.htm">Home</a> 
  &gt; <a href="GameModule.htm">Module</a> &gt; <a href="Map.htm">Map</a> &gt; <b>Deck</b></small>
  <br>
  <br>
  </td>
  </tr>
  <tr>
  <td valign="top">
  <hr size="2" width="100%">
  <h2>Deck</h2>
  <div align="center">
    <div align="left">
      A Deck functions like a deck of playing cards, but can also be used to hold a supply of other types of <a href="GamePiece.htm">Game Piece</a>, such
      as a fixed supply of counters or a "bag of chits" to be randomly drawn from. &nbsp; Each game begins with the
      contents of the Deck as specified in the Configuration window. &nbsp;During a game, players may remove cards from
      the deck by dragging them from the top of the deck with the mouse.&nbsp; This removes a card from the Deck and
      assigns ownership to the dragging player. &nbsp;Dragging a card onto the deck adds it back to the Deck.<br><br>The
      number of cards or pieces in the deck is exposed as a Map-level <a href="Properties.htm">Property</a> with the
      name <i>&lt;name&gt;_numPieces.</i> <br>The number of card or piece types in the deck can be exposed as a Map-level <a
        href="Properties.htm">Property</a> with the name <i>&lt;name&gt;_&lt;type&gt;</i> (see Perform Counting of Piece Types
      below).<br>
      <br>
      Decks can be added to <a href="Map.htm">Maps</a>, and also to <a href="PlayerHand.htm">Player Hands</a> and <a href="PrivateWindow.htm">Private Windows</a>, each
      of which is simply a specialized type of Map. To add a Deck, navigate to the <i>[Map]</i>, <i>[Player Hand]</i>, or <i>[Private Window]</i> component entry in the Editor configuration window for the Map (or specialized map)
      you wish to add the Deck to. Right-click on that component and select <i>Add Deck</i> from the menu. After you have
      configured your Deck and clicked the OK button, your new <i>[Deck]</i> component will appear at the bottom of the map's list of
      Sub-Components. You can then right-click on the <i>[Deck]</i> entry and begin adding Cards and other Deck Sub-Components.<br>
      <br>
      <b>NOTE:</b>&nbsp; Because Decks are quite often used to hold "cards", the Game Pieces contained within a Deck
      will be frequently referred to in Vassal and in documentation as "cards". However keep in mind that a "card" is
      simply a type of Game Piece, and a Deck can be used to contain <i>any</i> type of Game Piece. The difference between a
      "card" and a "piece" is only notional, and perhaps represented in the artwork and function of the piece/card.<br>
      <br>
    </div>
  </div>
    <table border="0" cellpadding="2" cellspacing="2" width="100%">
    <tbody>
      <tr>
        <td valign="top">
    <div align="left">
      <b>Name:</b>&nbsp; The name of a Deck is not used during game play. It is only used for identification in
      the Editor. The name should be unique. If multiple decks with the same name are created the return to deck trait will send cards to the first deck with that name.<br>
      <br>
      <b>Belongs to board:</b>&nbsp; If a name is selected, the Deck will appear on that particular <a href="Board.htm">Board</a>. If a
      game does not use that Board, then the Deck will not appear. If "&lt;any&gt;" is selected, then the Deck will
      always appear at the given position, regardless of the boards in use.<br>
      <br>
      <b>X,Y position:</b>&nbsp; The position in the Map Window of the center of the deck. If this Deck belongs to a Board, the position is
      relative to the Board's position in the Map Window.<br>
      <br>
      <b>Width, Height:</b>&nbsp; The size of the "tray" holding the cards. If the Deck is empty, this determines
      the area into which players may drag cards to add them back to the Deck, as well as the box drawn if the <i>Draw
      Outline When Empty</i> option is selected below. It should be set to approximately the same size as the
      cards the Deck will hold.<br>
      <br>
      <b>Allow Multiple Cards to be Drawn:</b>&nbsp; Adds a right-click context menu entry to the Deck's context menu that prompts the user to
      specify the number of cards to be drawn from the Deck with the next drag.<br>
      <br>
      <b>Allow Specific Cards to be Drawn:</b>&nbsp; Adds a right-click context menu entry to the Deck's context menu that allows the player to examine the Deck and select
      exactly which cards will be drawn from the deck with the next drag.<br>
      <br>
      <b>When selecting, list cards using:</b>&nbsp; When the player is prompted to select specific cards from the Deck, individual cards will be listed using the
      specified <a href="MessageFormat.htm">Message Format</a>.<br>
      <br>
      <b>When selecting, sort cards by:</b> &nbsp; When the player is prompted to select specific cards from the deck, the cards can optionally be sorted (alphabetically)
      using the listed property. Leave blank to list cards by their current position in the deck. <b>NOTE:</b> Unlike the previous field this field simply names a single property,
      and should not use $..$ markers. To sort by multiple fields a <a href="CalculatedProperty.htm">Calculated Property</a> trait e.g. <i>SortName</i> can be created and serve to
      concatenate the various fields in an appropriate order. <b>Example:</b> &nbsp;cards in a deck can use a <a href="PropertyMarker.htm">Marker</a>
      trait named CardNum to specify a card number (001,002, etc.) and always list cards in order of their assigned number: in this case simply fill
      <i>CardNum</i> into the field, no $..$.<br>
      <br>
      <b>Contents are Face-down:</b>&nbsp; Determines whether cards in the Deck are always drawn face-down, always drawn face-up, or
      can be switched from face-up to face-down with a right-click context menu entry.<br>
      <br>
      <b>Face Down Report Format:</b>&nbsp; A <a href="MessageFormat.htm">Message Format</a> that is echoed to the chat
      log whenever a player selects the <i>Face Down</i> menu item (if enabled above): <i>deckName</i> is the name of this deck, <i>commandName</i> is the name of the menu item.<br>
      <br>
      <b>Draw new cards face up:</b>&nbsp; If checked, then cards drawn from this Deck (e.g. by dragging them) will be placed face-up on the
      playing area. If unchecked, then cards from a face-down deck are drawn face down and owned by the drawing player.<br>
      <br>
      <b>Re-shuffle:</b>&nbsp; If set to <i>Never</i> then cards remain in their original order; cards are drawn from and
      added to the top. If set to <i>Always</i> then cards are always drawn randomly from the deck. If set to
      <i>Via right-click menu</i> then a <i>Shuffle</i> entry is added to the Deck's right-click context menu.<br>
      <br>
      <b>Re-shuffle Menu Text:</b>&nbsp; The right-click context menu entry for reshuffling the Deck.<br>
      <br>
      <b>Re-shuffle Report Format:</b>&nbsp; A <a href="MessageFormat.htm">Message Format</a> that is echoed to
      the chat log whenever a player selects the <i>Shuffle</i> menu item (if enabled above): <i>deckName</i> is the name of this Deck, <i>commandName</i> is the name of the context menu item.<br>
      <br>
      <b>Re-shuffle Hotkey:</b>&nbsp; A <a href="NamedKeyStroke.htm">Keystroke or Named Keystroke</a> that will cause a reshuffle. If left blank, a
      reshuffle can be caused only with the right-click context menu.<br>
      <br>
      <b>Reversible:</b>&nbsp; Adds an entry to the right-click context menu that reverses the order of cards in the Deck.<br>
      <br>
      <b>Reverse Report Format:</b>&nbsp; A <a href="MessageFormat.htm">Message Format</a> that is echoed to the chat log window whenever a player selects the "Reverse" menu item: <i>deckName</i> is the name of this deck, <i>commandName</i> is the name of the menu item.<br>
      <br>
      <b>Draw Outline When Empty?</b>&nbsp; Whether to draw the "tray" for the cards. The "tray" is a rectangle of size <i>width,height</i> centered at <i>x,y</i>. Only drawn when there are no cards in the Deck, to indicate where to drag cards to place them back in the Deck. May not be necessary or desirable if the Map Window contains a board on which the tray is already shown.<br>
      <br>
      <b>Color:</b>&nbsp; The color used to draw the rectangle representing the "tray" above.<br>
      <br>
      <b>Send Hotkey when empty?</b>&nbsp; Select this option to send a Global Hotkey whenever the Deck is emptied.<br>
      <br>
      <b>Hot Key to send when Deck empties:</b>&nbsp; Select the <a href="NamedKeyStroke.htm">Keystroke or Named Keystroke</a> to send whenever enough cards are removed from the Deck to empty it.<br>
      <br>
      <b>Include command to send entire deck to another deck:</b>&nbsp; If checked, the right-click context menu for
      this Deck will include a command that sends every Game Piece in this Deck to a different designated Deck. For example, this can be used to reshuffle a discard pile into its original deck. The following four attributes are used to configure this option.<br>
      <br>
      <b>Send Menu Text:</b>&nbsp; The text for the right-click context menu item.<br>
      <br>
      <b>Report Format:</b>&nbsp; A <a href="MessageFormat.htm">Send Message Format</a> that is echoed to the chat log window whenever a
      player selects the "send to another deck" menu item: <i>deckName</i> is the name of this deck, <i>commandName</i> is the name of the menu item.<br>
      <br>
      <b>Send Hot Key:</b>&nbsp; Select a <a href="NamedKeyStroke.htm">Keystroke or Named Keystroke</a> that will cause the Deck contents to be moved to the target Deck.<br>
      <br>
      <b>Name of deck to send to:</b>&nbsp; The name of the Deck that the contents of this Deck will be sent to.<br>
      <br>
      <b>Can be saved-to/loaded-from a file:</b>&nbsp; If selected, the right-click context menu will include <i>Save</i> and <i>Load</i> actions. The <i>Save</i> action saves
      the contents of a deck to a file. The <i>Load</i> action replaces the contents of the deck with the cards specified in
      the file. Saved decks can be loaded into an entirely different game than the one used to save the deck. This
      option is useful for collectible card games, in which a player may prepare a deck offline in preparation for a
      game.<br>
      <br>
      <b>Maximum Cards to be Displayed in Stack:</b>&nbsp; This defines the maximum number of cards to graphically
      display in the Deck. The default is 10. For example, if set to 10, a deck of 52 cards will appear to have 10
      cards, until the actual number of contents drops below 10. Then the deck will visually start to shrink as
      cards are removed. If set to 1, the deck will always appear flat as if it held only a single card.<br>
      <br>
      <b>Perform Counting of property expressions:</b>&nbsp; Enable processing of property expression counting. Expressions must be defined.<br>
      <br>
      <b>Expressions to count:</b>&nbsp; Specify expressions to be counted within the deck. These can be whatever you like and must be in the format of:
      <pre>&lt;expression name&gt; : &lt;expression&gt;</pre>
      For each expression, a map-level property called <i>&lt;deckName&gt;_&lt;expression name&gt;</i> is exposed. The exposed
      value is number of pieces for which that expression evaluates to <i>true</i>. An example of how to do this is provided
      below. NOTE: Currently the only "dynamic" property which can be used in counting expressions is <i>playerSide</i>. Other
      dynamic properties will most likely not update if they change after pieces move into a deck.<br>
      <br>
      <b>EXAMPLE:</b>&nbsp; An ordinary deck of playing cards for, say, Crazy Eights would be set to: <i>Allow
      Multiple = false</i>, <i>Allow Specific = false</i>, <i>Face Down = Always</i>, <i>Re-shuffle = Always</i>, <i>Reversible = false</i>. The
      discard pile would be: <i>Allow Multiple = false</i>, <i>Allow Specific = false</i>, <i>Face Down = Never</i>, <i>Re-shuffle =
      Never</i>, <i>Reversible = false</i>.<br>
      <br>
      A Deck may contain any kind of Game Piece, so it can also be used for draw piles of chits or counters that are
      drawn randomly and whose total number are limited by the game. If the pieces/cards do not need to be selected
      randomly and you simply wish to provide a pile of them on the board at game start, consider an <a href="SetupStack.htm">At-Start Stack</a>.<br>
      <br>

      <b>EXAMPLE:</b>&nbsp; A strategic game in which a nationality has a fixed force pool of
      variable-strength Infantry, Armor, etc. counters can be modeled by making a Map Window representing the force
      pool, with a Deck of Infantry counters, a Deck of Armor counters, etc. &nbsp;The decks would be set to <i>Allow
      Multiple = false</i>, <i>Allow Specific = false</i>, <i>Face Down = Never</i>, <i>Re-shuffle = Never</i>, <i>Reversible = false</i>. &nbsp;In
      order to guarantee that the number of each type of counter is fixed, any Clone and Delete traits of the
      Infantry and Armor counters should be removed.<br>
      <br>
      <b>EXAMPLE:</b>&nbsp; You want to create a deck of playing cards and display the number of red cards, the number
      of black cards, the number of face cards, and the total number of cards in the deck. Create the Deck, check
      <i>Perform counting of expressions</i>. Add the expressions of <i>red: color = red</i> and <i>black: color =
      black</i>.&nbsp; Also add the expression <i>facecards: value &gt; 10</i>. When creating your cards, give them a <a href="PropertyMarker.htm">Marker</a> trait
      named <i>color</i> with the values of <i>red</i> or <i>black</i> depending on the card. Also give your cards a Marker trait named <i>value</i> with the
      numeric value of the card. Then, you can refer to the counts with the map-level properties of
      <i>&lt;deckname&gt;_red</i>, <i>&lt;deckname&gt;_black</i>, and <i>&lt;deckname&gt;_facecards</i>.&nbsp; The total number of cards currently
      in the deck can be referenced by the map-level property of <i>&lt;deckname&gt;_numPieces</i>. <br>
      <br>
    </div>
    </td>
    <td valign="top">
    <img alt="" src="images/Deck.png">&nbsp;<br><br>
    </td>
    </tr>
    </tbody>
  </table>
  <hr size="2" width="100%">
  <h2>Sub-Components</h2> 
  Sub-Components can be added to a Deck by right-clicking on the <i>[Deck]</i> entry in the Module Editor and selecting the
  appropriate <i>Add</i> option.<br><br>
  <table cellpadding="2" cellspacing="2" border="0" width="100%">
    <tbody>
    <tr>
    <td valign="top">
    <h3><a href="GamePiece.htm">Card</a></h3> A Card is identical to a Game Piece, but is initialized with a <a
      href="Mask.htm">Mask</a> trait appropriate for a playing card.<br><br>
    <h3><a href="DeckGlobalKeyCommand.htm">Deck Global Key Command</a></h3> 
    Global Key Commands can be added to a Deck and will appear in the right-click context menu of the Deck. The
    resulting Global Key Command will be applied <i>only</i> to pieces contained in the Deck.<br>
    </td>
    <td valign="top"><img src="images/DeckAdd.png" alt=""><br>
    </td>
    </tr>
    </tbody>
  </table>
  </td>
  </tr>
  <tr>
  </tr>
  </tbody>
</table>
<br>
<br>
<br>
</body>
</html>
